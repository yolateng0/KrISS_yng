<div id="menu" class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a id="menu-toggle" class="btn btn-navbar" data-toggle="collapse" data-target="#menu-collapse" title="{'Menu'|Intl::msg}">{'Menu'|Intl::msg}</a>
      <a id="nav-home" class="brand ico-home" href="{$base}" title="{'Home'|Intl::msg}"></a>
      {if="isset($currentHashView)"}<span class="brand">{$currentHashView}</span>{/if}

      <div id="menu-collapse" class="nav-collapse collapse">
        <ul class="nav">
{if="$template==='stars' || $template==='index'"}
{loop="$menu"}
  {if="$key==='menuView'"}
    {if="$view==='expanded'"}
          <li><a href="{$query.'view=list'}" title="{'View as list'|Intl::msg}" class="menu-ico ico-list"><span class="menu-text menu-list"> {'View as list'|Intl::msg}</span></a></li>
    {else}
          <li><a href="{$query.'view=expanded'}" title="{'View as expanded'|Intl::msg}" class="menu-ico ico-expanded"><span class="menu-text menu-expanded"> {'View as expanded'|Intl::msg}</span></a></li>
    {/if}
  {elseif="$key==='menuListFeeds'"}
    {if="$listFeeds==='show'"}
          <li><a href="{$query.'listFeeds=hide'}" title="{'Hide feeds list'|Intl::msg}" class="menu-ico ico-list-feeds-hide"><span class="menu-text menu-list-feeds-hide"> {'Hide feeds list'|Intl::msg}</span></a></li>
    {else}
          <li><a href="{$query.'listFeeds=show'}" title="{'Show feeds list'|Intl::msg}" class="menu-ico ico-list-feeds-show"><span class="menu-text menu-list-feeds-show"> {'Show feeds list'|Intl::msg}</span></a></li>
    {/if}
  {elseif="$key==='menuFilter'"}
    {if="$filter==='unread'"}
          <li><a href="{$query.'filter=all'}" title="{'Show all items'|Intl::msg}" class="menu-ico ico-filter-all"><span class="menu-text menu-filter-all"> {'Show all items'|Intl::msg}</span></a></li>
    {else}
          <li><a href="{$query.'filter=unread'}" title="{'Show unread items'|Intl::msg}" class="menu-ico ico-filter-unread"><span class="menu-text menu-filter-unread"> {'Show unread items'|Intl::msg}</span></a></li>
     {/if}
  {elseif="$key==='menuOrder'"}
     {if="$order==='newerFirst'"}
          <li><a href="{$query.'order=olderFirst'}" title="{'Show older first'|Intl::msg}" class="menu-ico ico-order-older"><span class="menu-text menu-order"> {'Show older first'|Intl::msg}</span></a></li>
     {else}
          <li><a href="{$query.'order=newerFirst'}" title="{'Show newer first'|Intl::msg}" class="menu-ico ico-order-newer"><span class="menu-text menu-order"> {'Show newer first'|Intl::msg}</span></a></li>
     {/if}
  {elseif="$key==='menuUpdate'"}
     {if="$currentHashType=='folder'"}
          {$intl=Intl::msg('Update folder')}
     {elseif="$currentHashType=='feed'"}
          {$intl=Intl::msg('Update feed')}
     {else}
          {$intl=Intl::msg('Update all')}
     {/if}
          <li><a href="{$query.'update='.$currentHash}" title="{$intl}" class="menu-ico ico-update"><span class="menu-text menu-update"> {$intl}</span></a></li>
  {elseif="$key==='menuRead'"}
     {if="$currentHashType=='folder'"}
          {$intl=Intl::msg('Mark folder as read')}
     {elseif="$currentHashType=='feed'"}
          {$intl=Intl::msg('Mark feed as read')}
     {else}
          {$intl=Intl::msg('Mark all as read')}
     {/if}
          <li><a href="{$query.'read='.$currentHash}" title="{$intl}" class="menu-ico ico-mark-as-read"><span class="menu-text menu-mark-as-read"> {$intl}</span></a></li>
  {elseif="$key==='menuUnread'"}
     {if="$currentHashType=='folder'"}
          {$intl=Intl::msg('Mark folder as unread')}
     {elseif="$currentHashType=='feed'"}
          {$intl=Intl::msg('Mark feed as unread')}
     {else}
          {$intl=Intl::msg('Mark all as unread')}
     {/if}
          <li><a href="{$query.'unread='.$currentHash}" title="{$intl}" class="menu-ico ico-mark-as-unread"><span class="menu-text menu-mark-as-unread"> {$intl}</span></a></li>
  {elseif="$key==='menuEdit'"}
     {if="$currentHashType=='folder'"}
          {$intl=Intl::msg('Edit folder')}
     {elseif="$currentHashType=='feed'"}
          {$intl=Intl::msg('Edit feed')}
     {else}
          {$intl=Intl::msg('Edit all')}
     {/if}
          <li><a href="{$query.'edit='.$currentHash}" title="{$intl}" class="menu-ico ico-edit"><span class="menu-text menu-edit"> {$intl}</span></a></li>
  {elseif="$key==='menuAdd'"}
          <li><a href="{$query.'add'}" title="{'Add a new feed'|Intl::msg}" class="menu-ico ico-add-feed"><span class="menu-text menu-add-feed"> {'Add a new feed'|Intl::msg}</span></a></li>
  {elseif="$key==='menuHelp'"}
          <li><a href="{$query.'help'}" title="{'Help'|Intl::msg}" class="menu-ico ico-help"><span class="menu-text menu-help"> {'Help'|Intl::msg}</span></a></li>
  {elseif="$key==='menuStars'"}
    {if="$template==='index'"}
          <li><a href="{$query.'stars'}" title="{'Starred items'|Intl::msg}" class="menu-ico ico-star"><span class="menu-text menu-help"> {'Starred items'|Intl::msg}</span></a></li>
    {/if}
  {/if}
{/loop}
{if="$kf->kfc->isLogged()"}
          <li><a href="?config" title="{'Configuration'|Intl::msg}" class="menu-ico ico-config"><span class="menu-text menu-config"> {'Configuration'|Intl::msg}</span></a></li>
{/if}
{elseif="$template==='config'"}
          <li><a href="?password" title="{'Change password'|Intl::msg}"> {'Change password'|Intl::msg}</a></li>
          <li><a href="?import" title="{'Import opml file'|Intl::msg}"> {'Import opml file'|Intl::msg}</a></li>
          <li><a href="?export" title="{'Export opml file'|Intl::msg}"> {'Export opml file'|Intl::msg}</a></li>
          <li><a href="?plugins" title="{'Plugins management'|Intl::msg}"> {'Plugins management'|Intl::msg}</a></li>
{/if}
{if="Session::isLogged()"}
          <li><a href="?logout" title="{'Sign out'|Intl::msg}" class="menu-ico ico-logout"><span class="menu-text menu-logout"> {'Sign out'|Intl::msg}</span></a></li>
{else}
          <li><a href="?login" title="{'Sign in'|Intl::msg}" class="menu-ico ico-login"><span class="menu-text menu-login"> {'Sign in'|Intl::msg}</span></a></li>
{/if}
        </ul>
        <div class="clear"></div>
      </div>
      <div class="clear"></div>
    </div>
  </div>
</div>
